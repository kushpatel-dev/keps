<section
  id="marquee-{{ section.id }}"
  class="w-full bg-[#fdf2d8] overflow-hidden"
  style="--speed: {{ section.settings.speed | default: 25 }}s;">
  <div class="max-w-screen-2xl mx-auto px-4 md:px-8 pt-10">
    {% if section.settings.heading != blank %}
      <h2 class="ctm-h2-m text-center font-extrabold tracking-wide text-[32px] md:text-[40px]" style="font-family: cursive;">
        {{ section.settings.heading }}
      </h2>
    {% endif %}
  </div>

  <!-- Marquee band -->
  <div class="relative w-full border-y border-neutral-800 mt-6">
    <div class="flex items-stretch whitespace-nowrap animate-marquee-ltr will-change-transform">

      {%- comment -%} First pass {%- endcomment -%}
      {% for block in section.blocks %}
        {% if block.type == 'logo' %}
          <div class="tile flex-shrink-0 flex items-center justify-center h-28 md:h-36 w-[260px] md:w-[320px] border-r border-neutral-800">
            {% if block.settings.logo != blank %}
              <img
                height=""
                width=""
                src="{{ block.settings.logo | image_url: width: 220 }}"
                alt="{{ block.settings.alt_text | escape }}"
                class="max-h-12 md:max-h-16 w-auto opacity-80"
                loading="lazy">
            {% else %}
              <span class="text-2xl md:text-3xl font-black text-neutral-700">{{ block.settings.fallback_text }}</span>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}

      {%- comment -%} Duplicate for seamless loop {%- endcomment -%}
      {% for block in section.blocks %}
        {% if block.type == 'logo' %}
          <div class="tile flex-shrink-0 flex items-center justify-center h-28 md:h-36 w-[260px] md:w-[320px] border-r border-neutral-800">
            {% if block.settings.logo != blank %}
              <img
                height=""
                width=""
                src="{{ block.settings.logo | image_url: width: 220 }}"
                alt="{{ block.settings.alt_text | escape }}"
                class="max-h-12 md:max-h-16 w-auto opacity-80"
                loading="lazy">
            {% else %}
              <span class="text-2xl md:text-3xl font-black text-neutral-700">{{ block.settings.fallback_text }}</span>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}

    </div>
  </div>
</section>

<style>
  /* LTR motion: start at -50% and move to 0 to scroll right */
  @keyframes marquee-ltr {
    0% {
      transform: translateX(-50%);
    }
    100% {
      transform: translateX(0%);
    }
  }
  #marquee-{{ section.id }}
  .animate-marquee-ltr {
    animation: marquee-ltr var(--speed, 25s) linear infinite;
  }
</style>

{% schema %}
  {
    "name": "Brand Marquee (LTR)",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Our trusted Supplies"
      }, {
        "type": "range",
        "id": "speed",
        "label": "Scroll Speed (seconds, lower = faster)",
        "min": 10,
        "max": 60,
        "step": 1,
        "default": 25
      }
    ],
    "blocks": [
      {
        "type": "logo",
        "name": "Logo",
        "settings": [
          {
            "type": "image_picker",
            "id": "logo",
            "label": "Logo image"
          }, {
            "type": "text",
            "id": "alt_text",
            "label": "Alt text",
            "default": "Brand logo"
          }, {
            "type": "text",
            "id": "fallback_text",
            "label": "Fallback text (used if no image)",
            "default": "Brand Name"
          }
        ]
      }
    ],
    "max_blocks": 24,
    "presets": [
      {
        "name": "Brand Marquee",
        "category": "Custom",
        "blocks": [
          {
            "type": "logo"
          },
          {
            "type": "logo"
          },
          {
            "type": "logo"
          },
          {
            "type": "logo"
          }, {
            "type": "logo"
          }
        ]
      }
    ]
  }
{% endschema %}