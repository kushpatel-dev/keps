<div class="bg-gray-50 min-h-screen py-6 w-full">
  <div class="w-full border-t border-b border-gray-200 bg-white flex flex-col md:flex-row shadow-md">

    <!-- LEFT: Vertical Tabs (Horizontal on mobile) -->
    <div class="flex md:flex-col flex-row items-stretch border-b md:border-b-0 md:border-r border-gray-200">
      {% for block in section.blocks %}
        <button
          type="button"
          class="tab-btn transition-colors duration-200 border-gray-200 last:border-0 font-bold font-sans text-sm uppercase tracking-wide
              h-14 md:h-40 w-full md:w-16 flex items-center justify-center
              {% if forloop.first %}bg-black text-white{% else %}bg-white text-black hover:bg-black hover:text-white{% endif %}
              border-b md:border-r md:last:border-b-0 md:border-b-0"
          data-tab-index="{{ forloop.index0 }}"
          style="writing-mode: vertical-rl; text-orientation: mixed; letter-spacing: 2px;"
          aria-selected="{% if forloop.first %}true{% else %}false{% endif %}">
          {{ block.settings.tab_title }}
        </button>
      {% endfor %}
    </div>

    <!-- RIGHT: Image and Info -->
    <div class="flex-1 flex flex-col p-4 md:p-8 gap-6 md:gap-10">
      {% for block in section.blocks %}
        <div class="tab-content w-full gap-6 md:gap-10 flex flex-col md:flex-row items-start {% unless forloop.first %}hidden{% endunless %}" data-tab-index="{{ forloop.index0 }}">

          <!-- IMAGE Left -->
          <div class="w-full md:w-[500px] flex-shrink-0 mb-4 md:mb-0">
            {% if block.settings.main_image != blank %}
              <img
                height=""
                width=""
                src="{{ block.settings.main_image | image_url: width: 1000 }}"
                alt="{{ block.settings.heading | escape }}"
                class="rounded-lg border border-gray-200 shadow-sm w-full object-cover aspect-[4/3]"
                loading="lazy">
            {% else %}
              <div class="w-full h-[220px] md:h-[320px] bg-gray-100 rounded-lg flex items-center justify-center text-gray-400">No Image</div>
            {% endif %}
          </div>

          <!-- TEXT Right -->
          <div class="flex-1 flex flex-col justify-between gap-4 md:gap-6">
            <div>
              <h3 class="text-sm md:text-lg lg:text-2xl font-bold mb-2 md:mb-3 uppercase font-sans tracking-tight">{{ block.settings.heading }}</h3>
              <div class="text-sm md:text-lg lg:text-2xl mb-1 md:mb-2 whitespace-pre-line">{{ block.settings.address }}</div>
              <div class="text-sm md:text-lg lg:text-2xl mb-1 md:mb-2">Tel: {{ block.settings.phone }}</div>
              <div class="text-sm md:text-lg lg:text-2xl mb-1 md:mb-2">Email: {{ block.settings.email }}</div>
              <div class="text-sm md:text-lg lg:text-2xl mb-3 md:mb-4 whitespace-pre-line">{{ block.settings.opening_hours | newline_to_br }}</div>
            </div>
            {% if block.settings.button_label != blank %}
              <a
                href="{{ block.settings.button_link | default: '#' }}"
                class="inline-block px-3 md:px-4 py-1.5 md:py-2 bg-black text-white font-mono text-[10px] md:text-sm lg:text-base font-bold tracking-wider rounded-sm border border-black shadow-sm hover:bg-gray-800 transition text-center w-[80px] md:w-[100px]"
                target="_blank"
                rel="noopener">
                {{ block.settings.button_label }}
              </a>
            {% endif %}
          </div>

        </div>
      {% endfor %}
    </div>
  </div>
</div>

<style>
  @media (max-width: 767px) {
    .tab-btn[style] {
      writing-mode: horizontal-tb !important;
      text-orientation: unset !important;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
  
    tabBtns.forEach((btn) => {
      btn.addEventListener('click', function () {
        tabBtns.forEach(b => {
          b.classList.remove('bg-black', 'text-white');
          b.classList.add('bg-white', 'text-black', 'hover:bg-black', 'hover:text-white');
          b.setAttribute('aria-selected', 'false');
        });
  
        tabContents.forEach(tc => tc.classList.add('hidden'));
  
        btn.classList.add('bg-black', 'text-white');
        btn.classList.remove('bg-white', 'text-black', 'hover:bg-black', 'hover:text-white');
        btn.setAttribute('aria-selected', 'true');
  
        const index = btn.getAttribute('data-tab-index');
        document.querySelector(`.tab-content[data-tab-index="${index}"]`).classList.remove('hidden');
      });
    });
  });
</script>
{% schema %}
  {
    "name": "Switchable Coffee",
    "settings": [],
    "blocks": [
      {
        "type": "cafe",
        "name": "Cafe Contact",
        "settings": [
          {
            "type": "text",
            "id": "tab_title",
            "label": "Tab Title",
            "default": "Cafe Name"
          },
          {
            "type": "image_picker",
            "id": "main_image",
            "label": "Main Image"
          },
          {
            "type": "text",
            "id": "heading",
            "label": "Heading",
            "default": "Cafe Heading"
          },
          {
            "type": "textarea",
            "id": "address",
            "label": "Address",
            "default": "123 Main St, City"
          }, {
            "type": "text",
            "id": "phone",
            "label": "Phone",
            "default": "0123-456789"
          }, {
            "type": "text",
            "id": "email",
            "label": "Email",
            "default": "info@example.com"
          }, {
            "type": "textarea",
            "id": "opening_hours",
            "label": "Opening Hours",
            "default": "Mon-Fri: 7am - 7pm\nSat-Sun: 8am - 5pm"
          }, {
            "type": "text",
            "id": "button_label",
            "label": "Button Label",
            "default": "Contact Us"
          }, {
            "type": "url",
            "id": "button_link",
            "label": "Button Link"
          }
        ]
      }
    ],
    "max_blocks": 3,
    "presets": [
      {
        "name": "Switchable Coffee Contacts",
        "blocks": [
          {
            "type": "cafe"
          }, {
            "type": "cafe"
          }, {
            "type": "cafe"
          }
        ]
      }
    ]
  }
{% endschema %}